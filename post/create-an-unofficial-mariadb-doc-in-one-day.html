<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>create-an-unofficial-mariadb-doc-in-one-day</title><link href="../css/han.css" rel="stylesheet">
</head>
<body class='typora-export os-windows'>
<div id='write'  class=''><h1><a name="我如何用一天时间搭建非官方的mariadb文档" class="md-header-anchor"></a><span>我如何用一天时间搭建非官方的MariaDB文档</span></h1><p><span>当然你可能说，搭建一个非官方的文档网站完全不需要一天时间，只要反向代理一下就完成了。但我想说的不是这样。我做这个非官方文档主要有三个原因：</span></p><ul><li><span>原来的文档是以Wiki形式储存，无法更好地展现这份文档的结构</span></li><li><span>我要把原始的文档转为Markdown格式，更容易转换成PDF或者其他格式随身携带，也能够自动使用Markdown格式文档的众多工具</span></li><li><span>我还有一个私心就是我有把这个文档翻译成中文的想法，我需要了解一下到底有多个文档需要翻译</span></li></ul><p><span>在业务时间方面，我并不是很充足，但其实我自己也没想到这件事情一天就做了差不多。我本来的预估是干上几个周末。</span></p><h2><a name="预备工作" class="md-header-anchor"></a><span>预备工作</span></h2><p><span>做这件事情之前，我先做的就是在搜索引擎上搜索mariadb doc portable以及mariadb doc pdf，还有mariadb doc offline等关键词，寻找有用信息，另外就是确认之前没有人已经做过这个工作了。因为不重复造轮子的观念，如果有人已经做过了，我就要考虑是否不去做这件事情。但事实我没发现有人做过，其实对于这个结果我也很诧异。MariaDB作为多个操作系统预装的MySQL分支，用户也不乏大公司，但就因为官方没有出过可以下载的文档版本，就没有人自行制作。</span></p><p><span>我妄自猜测一下，有可能是这几个原因造成没有可下载版的MariaDB文档：</span></p><ul><li><span>MariaDB公司靠MariaDB数据库技术支持以及MariaDB的周边吃饭，如果人们太方便了，那他们还哪来业务呢</span></li><li><span>MySQL的各种文档很多。可下载的也有，中文的或者翻译成中文的也有；人们使用MariaDB的一个重要原因是它作为MySQL的一个drop-in replacement。包括我自己以前，几乎都是直接去查MySQL的官方文档，用它来当MariaDB的参考</span></li><li><span>在线的参考将就能用，如果没有必要，谁会去再整一份呢</span></li></ul><p><span>但我还是看到确实有人有离线版的需要，就像我一样。说实话，有时候文档这种东西，光是在线能够浏览，就是我这种人吧，总觉得不够，“不能一览全貌”。一个一个链接，到底有多少层，谁知道呢？就感觉望不到头。</span></p><p><span>好在这个knowledge base（kb）里</span><a href='https://mariadb.com/kb/en/meta/mirroring-the-mariadb-knowledge-base/'><span>告诉了我们</span></a><span>，如何做一个kb的镜像网站。那就是通过Linux最常用的下载工具之一wget。官方告诉我们的命令是这样的：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="bash"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">wget</span> \</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-attribute">-e</span> <span class="cm-def">robots</span><span class="cm-operator">=</span>off \</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-attribute">--recursive</span> <span class="cm-attribute">--no-clobber</span> <span class="cm-attribute">--page-requisites</span> \</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-attribute">--adjust-extension</span> <span class="cm-attribute">--convert-links</span> \</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-attribute">--restrict-file-names</span><span class="cm-operator">=</span>windows \</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-attribute">--domains</span><span class="cm-operator">=</span>kb-mirror.mariadb.com \</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  http://kb-mirror.mariadb.com</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 161px;"></div><div class="CodeMirror-gutters" style="display: none; height: 161px;"></div></div></div></pre><p><span>我一开始也是用的跟上面一模一样的命令。但我后面改成了下面这个命令：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="bash"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">wget</span> \</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-attribute">-e</span> <span class="cm-def">robots</span><span class="cm-operator">=</span>off \</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-attribute">--recursive</span> <span class="cm-attribute">--no-clobber</span> <span class="cm-attribute">--page-requisites</span> \</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-attribute">--adjust-extension</span> &nbsp;<span class="cm-attribute">--domains</span><span class="cm-operator">=</span>kb-mirror.mariadb.com \</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-attribute">--restrict-file-names</span><span class="cm-operator">=</span>nocontrol \</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-attribute">--include-directories</span><span class="cm-operator">=</span>kb/en/library/documentation \</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  http://kb-mirror.mariadb.com/kb/en/library/documentation/</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 161px;"></div><div class="CodeMirror-gutters" style="display: none; height: 161px;"></div></div></div></pre><p><span>为什么改呢？因为我发现上面那个命令我要下载的东西太多了，有很多超出了MariaDB文档的范畴。我下面这个命令会以</span><a href='http://kb-mirror.mariadb.com/kb/en/library/documentation/' target='_blank' class='url'>http://kb-mirror.mariadb.com/kb/en/library/documentation/</a><span> 这个页面为起点，而且如果页面跳转出了kb/en/library/documentation的反馈，wget的递归就不会追踪下去。另外就是，下面少了</span><code>--convert-links</code><span>这个命令。在用上面那个命令的时候，我发现no-clobber（也就是已经存在的不重复下载）这个选项设置了不起作用，上网查了才知道，convert-links这个选项始于no-clobber冲突的。另外，为了我后面追踪文件名称方便，我也不需要wget帮我自动转换链接，我要自己处理。</span></p><h2><a name="html到markdown的转换" class="md-header-anchor"></a><span>HTML到Markdown的转换</span></h2><p><span>上面我们已经下载好了HTML格式的文档，那么如何把它转换成Markdown呢？我跟大家一样，首先考虑的是用现成的工具。但是我试了一遍以后发现，没有一个工具是能够完美转换的，那还不如自己写一个。自己写的话，可以写得简单一些，不用把所有的转换都实现，因为Markdown支持HTML block，也就是我们保留原始HTML，也不用太担心违反Markdown的标准。</span></p><p><span>你或许在想，那干脆不要转换了，直接把HTML放那呗。我们把HTML转为Markdown还有一个重要原因是，生成容易维护的文档。为什么大家都喜欢用Markdown写文档，而不直接写HTML呢？HTML也不难，但Markdown更简洁，没有多余的tag，Markdown是一个源码都对人类友好的语言，而HTML以至XML是源码对机器更友好的语言。</span></p><p><span>在编写HTML到Markdown转换的选择上，我首选了Deno，用JS语言写。为什么我没用最爱的Lua呢？其实我也尝试了，但发现Lua的没有像JS一样的全面而好用的DOM。为了避免不懂前端的同学不知道DOM是什么，我来解释一下。我们看一下维基百科</span></p><blockquote><p><span>文档对象模型（DOM）是一个跨平台和独立于语言的接口，它将XML或HTML文档视为一个树形结构，其中每个节点是一个对象，代表文档的一部分。</span></p></blockquote><p><span>DOM是操作HTML的一个非常方便的方式，它其实是语言无关的，任何语言都可以按照DOM标准实现一个这样的操作库。</span></p><p><img src="https://upload.wikimedia.org/wikipedia/commons/5/5a/DOM-model.svg" referrerpolicy="no-referrer" alt="dom"></p><p><span>但是最常说的DOM还是Web浏览器中的DOM，允许JS操作HTML文档。JS中实现的DOM也一般来说是最接近标准的，函数最全的。所以为了节约时间，我们就直接用JS吧。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="js"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="js"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> { <span class="cm-def">DOMParser</span>, <span class="cm-def">Element</span> } <span class="cm-keyword">from</span> <span class="cm-string">"./deno-dom/deno-dom-wasm.ts"</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-def">text</span> <span class="cm-operator">=</span> <span class="cm-keyword">await</span> <span class="cm-variable">Deno</span>.<span class="cm-property">readTextFile</span>(<span class="cm-variable">‘</span><span class="cm-operator">/</span><span class="cm-variable">path</span><span class="cm-operator">/</span><span class="cm-variable">to</span><span class="cm-operator">/</span><span class="cm-variable">source’</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-def">doc</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">DOMParser</span>().<span class="cm-property">parseFromString</span>(<span class="cm-variable">text</span>, <span class="cm-string">"text/html"</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><p><span>在Deno里我们用deno-dom这个DOM实现。如果你更习惯Node.js，也有很多可以用在Node.js里的DOM实现。通过解析HTML获取到我们的doc，相当于浏览器中的全局document变量。</span></p><p><span>有了DOM，HTML文件对于我们来说不再是文本结构，而是一个树结构。于是我们可以用最简单的递归来一层层遍历这棵树。于是我实现了这样一个JS函数，</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="js" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="js"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">function</span> <span class="cm-def">traverseNode</span>(<span class="cm-def">node</span>) {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">for</span> (<span class="cm-keyword">const</span> <span class="cm-def">child</span> <span class="cm-keyword">of</span> <span class="cm-variable-2">node</span>.<span class="cm-property">children</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">nodeName</span> <span class="cm-operator">=</span> <span class="cm-variable-2">child</span>.<span class="cm-property">nodeName</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">hTag</span> <span class="cm-operator">=</span> <span class="cm-variable-2">nodeName</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable-2">nodeName</span>.<span class="cm-property">match</span>(<span class="cm-string-2">/^H(\d)$/</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable-2">nodeName</span> <span class="cm-operator">===</span> <span class="cm-string">'P'</span> <span class="cm-operator">||</span> <span class="cm-variable-2">hTag</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">segments</span>.<span class="cm-property">push</span>({ <span class="cm-property">tag</span>: <span class="cm-variable-2">nodeName</span>, <span class="cm-property">data</span>: <span class="cm-variable-2">child</span>.<span class="cm-property">innerHTML</span>.<span class="cm-property">trim</span>() });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  } <span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable-2">nodeName</span> <span class="cm-operator">===</span> <span class="cm-string">'TABLE'</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">segments</span>.<span class="cm-property">push</span>({ <span class="cm-property">tag</span>: <span class="cm-variable-2">nodeName</span>, <span class="cm-property">data</span>: <span class="cm-variable-2">child</span>.<span class="cm-property">outerHTML</span> });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  } <span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable-2">nodeName</span> <span class="cm-operator">===</span> <span class="cm-string">'PRE'</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">segments</span>.<span class="cm-property">push</span>({ <span class="cm-property">tag</span>: <span class="cm-variable-2">nodeName</span>, <span class="cm-property">data</span>: <span class="cm-variable-2">child</span>.<span class="cm-property">textContent</span> });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  } <span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable-2">nodeName</span> <span class="cm-operator">===</span> <span class="cm-string">'HR'</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">segments</span>.<span class="cm-property">push</span>({ <span class="cm-property">tag</span>: <span class="cm-variable-2">nodeName</span>, <span class="cm-property">data</span>: <span class="cm-string">'---'</span> });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  } <span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable-2">nodeName</span> <span class="cm-operator">===</span> <span class="cm-string">'UL'</span> <span class="cm-operator">||</span> <span class="cm-variable-2">nodeName</span> <span class="cm-operator">===</span> <span class="cm-string">'OL'</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">list</span> <span class="cm-operator">=</span> [];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-keyword">const</span> <span class="cm-def">item</span> <span class="cm-keyword">of</span> <span class="cm-variable-2">child</span>.<span class="cm-property">children</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-2">list</span>.<span class="cm-property">push</span>(<span class="cm-variable-2">item</span>.<span class="cm-property">innerHTML</span>.<span class="cm-property">trim</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">segments</span>.<span class="cm-property">push</span>({ <span class="cm-property">tag</span>: <span class="cm-variable-2">nodeName</span>, <span class="cm-property">data</span>: <span class="cm-variable-2">list</span> });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  } <span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable-2">nodeName</span> <span class="cm-operator">===</span> <span class="cm-string">'DIV'</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">traverseNode</span>(<span class="cm-variable-2">child</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  } <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-variable-2">child</span>.<span class="cm-property">nodeValue</span> <span class="cm-operator">?</span> <span class="cm-variable-2">child</span>.<span class="cm-property">nodeValue</span>.<span class="cm-property">trim</span>().<span class="cm-property">substring</span>(<span class="cm-number">0</span>, <span class="cm-number">50</span>) : <span class="cm-variable-2">nodeName</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 575px;"></div><div class="CodeMirror-gutters" style="display: none; height: 575px;"></div></div></div></pre><p><span>这个函数很好懂，就是针对你遇到的节点它的nodeName，来做不同的处理而已，简简单单的if...else，想理解不了都难吧。比如，遇到DIV之后，就再往里遍历一层；遇到P段落，就把它里面的HTML去掉两边的空格，等待后面的处理。我们要把我们的思维变成一步一步，而不是想着一步就搞定所有事情。</span></p><p><span>经过遍历的DOM，就留下了对我们有用的segments，于是我们就可以再对segments做进一步处理</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="js" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="js"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">function</span> <span class="cm-def">processSegments</span>() {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">let</span> <span class="cm-def">prevTag</span> <span class="cm-operator">=</span> <span class="cm-atom">null</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">for</span> (<span class="cm-keyword">const</span> <span class="cm-def">item</span> <span class="cm-keyword">of</span> <span class="cm-variable">segments</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">let</span> <span class="cm-def">tag</span> <span class="cm-operator">=</span> <span class="cm-variable-2">item</span>.<span class="cm-property">tag</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">hLevel</span> <span class="cm-operator">=</span> <span class="cm-variable-2">tag</span>.<span class="cm-property">match</span>(<span class="cm-string-2">/^H(\d)$/</span>) <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">RegExp</span>.<span class="cm-property">$1</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable-2">hLevel</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable-2">item</span>.<span class="cm-property">data</span> <span class="cm-operator">=</span> <span class="cm-string">'#'</span>.<span class="cm-property">repeat</span>(<span class="cm-variable-2">hLevel</span>) <span class="cm-operator">+</span> <span class="cm-string">' '</span> <span class="cm-operator">+</span> <span class="cm-variable">basicMarkdown</span>(<span class="cm-variable-2">item</span>.<span class="cm-property">data</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  } <span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable-2">tag</span> <span class="cm-operator">===</span> <span class="cm-string">'PRE'</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable-2">item</span>.<span class="cm-property">data</span> <span class="cm-operator">=</span> <span class="cm-string">'```sql\n'</span> <span class="cm-operator">+</span> <span class="cm-variable-2">item</span>.<span class="cm-property">data</span>.<span class="cm-property">replace</span>(<span class="cm-string-2">/\n$/g</span>, <span class="cm-string">''</span>) <span class="cm-operator">+</span> <span class="cm-string">'\n```'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  } <span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable-2">tag</span> <span class="cm-operator">===</span> <span class="cm-string">'P'</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable-2">item</span>.<span class="cm-property">data</span> <span class="cm-operator">=</span> <span class="cm-variable">basicMarkdown</span>(<span class="cm-variable-2">item</span>.<span class="cm-property">data</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  } <span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable-2">tag</span> <span class="cm-operator">===</span> <span class="cm-string">'UL'</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable-2">item</span>.<span class="cm-property">data</span> <span class="cm-operator">=</span> <span class="cm-variable-2">item</span>.<span class="cm-property">data</span>.<span class="cm-property">map</span>(<span class="cm-def">x</span> <span class="cm-operator">=&gt;</span> <span class="cm-string">'- '</span> <span class="cm-operator">+</span> <span class="cm-variable">basicMarkdown</span>(<span class="cm-variable-2">x</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  .<span class="cm-property">join</span>(<span class="cm-string">'\n'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  } <span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable-2">tag</span> <span class="cm-operator">===</span> <span class="cm-string">'OL'</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable-2">item</span>.<span class="cm-property">data</span> <span class="cm-operator">=</span> <span class="cm-variable-2">item</span>.<span class="cm-property">data</span>.<span class="cm-property">map</span>((<span class="cm-def">x</span>, <span class="cm-def">index</span>) <span class="cm-operator">=&gt;</span> (<span class="cm-variable-2">index</span><span class="cm-operator">+</span><span class="cm-number">1</span>) <span class="cm-operator">+</span> <span class="cm-string">' '</span> <span class="cm-operator">+</span> <span class="cm-variable">basicMarkdown</span>(<span class="cm-variable-2">x</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  .<span class="cm-property">join</span>(<span class="cm-string">'\n'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 460px;"></div><div class="CodeMirror-gutters" style="display: none; height: 460px;"></div></div></div></pre><p><span>在这一步里，我们把我们准备好的segments再放进锅里，不就顺理成章了？等等，我不是在教做菜。不过差不多啦。用processSegments这个锅炒炒，就能炒出我们的markdown了。是不是过于简单了。</span></p><p><span>其实我把上述的整个流程都扔到了toMarkdown这么一个函数里。因为读取文件这个过程在Deno中是一个异步过程，所以toMarkdown是一个async函数。然后我们还要准备一个遍历文件夹的函数，我用的都是Deno原生的方式，没有依赖任何库，甚至Deno标准库都没依赖。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="js" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="js"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">async</span> <span class="cm-keyword">function</span> <span class="cm-def">visitDir</span>(<span class="cm-def">currentPath</span>) {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">let</span> <span class="cm-def">names</span> <span class="cm-operator">=</span> [];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">for</span> <span class="cm-keyword">await</span> (<span class="cm-keyword">const</span> <span class="cm-def">dirEntry</span> <span class="cm-keyword">of</span> <span class="cm-variable">Deno</span>.<span class="cm-property">readDir</span>(<span class="cm-variable-2">currentPath</span>)) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">entryPath</span> <span class="cm-operator">=</span> <span class="cm-string-2">`${</span><span class="cm-variable-2">currentPath</span><span class="cm-string-2">}/${</span><span class="cm-variable-2">dirEntry</span>.<span class="cm-property">name</span><span class="cm-string-2">}`</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable-2">dirEntry</span>.<span class="cm-property">isDirectory</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">await</span> <span class="cm-variable">visitDir</span>(<span class="cm-variable-2">entryPath</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  } <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Deno</span>.<span class="cm-property">writeTextFile</span>(<span class="cm-variable-2">entryPath</span>.<span class="cm-property">replace</span>(<span class="cm-string-2">/^documentation/</span>,<span class="cm-string">'maria-doc'</span>).<span class="cm-property">replace</span>(<span class="cm-string">'index.html'</span>, <span class="cm-string">'README.md'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">await</span> <span class="cm-variable">toMarkdown</span>(<span class="cm-variable-2">entryPath</span>));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">//await toMarkdown(entryPath)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 368px;"></div><div class="CodeMirror-gutters" style="display: none; height: 368px;"></div></div></div></pre><p><span>你或许发现，我们不知不觉用上了for await ... of的语法，在Deno里面，你会爱上JavaScript最新的标准的，你不会再考虑用什么axios发请求，全部都会是fetch，因为Deno不给你机会用XMLHTTPRequest；你还会非常习惯地使用Promise，而且是用async ... await关键词，因为太方便了。Deno是我理想地编写JS脚本的方式。</span></p><h2><a name="解决wget把文件路径过长的文件强行重命名的问题" class="md-header-anchor"></a><span>解决wget把文件路径过长的文件强行重命名的问题</span></h2><p><span>由于MariaDB的文档层级过多，路径名起得还挺长，于是就有了超过操作系统限制。wget没有等到操作系统提示我们，直接就自己做主把路径变掉了。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">The name is too long, 258 chars total.</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Trying to shorten...</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p><span>大概就是这样一个提示，这就造成了部分文件名与其他的不一样。正常的都应该是叫index.html的，有的被截得只剩i.html，还有的甚至截到了上级目录。于是我们拿Deno脚本遍历修复一下，修改一下我们之前的visitDir函数就搞出来这个了</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="js" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="js"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">async</span> <span class="cm-keyword">function</span> <span class="cm-def">visitDir</span>(<span class="cm-def">currentPath</span>) {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">for</span> <span class="cm-keyword">await</span> (<span class="cm-keyword">const</span> <span class="cm-def">dirEntry</span> <span class="cm-keyword">of</span> <span class="cm-variable">Deno</span>.<span class="cm-property">readDir</span>(<span class="cm-variable-2">currentPath</span>)) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">entryPath</span> <span class="cm-operator">=</span> <span class="cm-string-2">`${</span><span class="cm-variable-2">currentPath</span><span class="cm-string-2">}/${</span><span class="cm-variable-2">dirEntry</span>.<span class="cm-property">name</span><span class="cm-string-2">}`</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable-2">dirEntry</span>.<span class="cm-property">isDirectory</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">await</span> <span class="cm-variable">visitDir</span>(<span class="cm-variable-2">entryPath</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  } <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable-2">dirEntry</span>.<span class="cm-property">name</span> <span class="cm-operator">!=</span> <span class="cm-string">'index.html'</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">let</span> <span class="cm-def">rawName</span> <span class="cm-operator">=</span> <span class="cm-variable-2">dirEntry</span>.<span class="cm-property">name</span>.<span class="cm-property">replace</span>(<span class="cm-string-2">/[.].*/</span>, <span class="cm-string">''</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-string">'index'</span>.<span class="cm-property">startsWith</span>(<span class="cm-variable-2">rawName</span>)) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Deno</span>.<span class="cm-property">rename</span>(<span class="cm-variable-2">entryPath</span>, <span class="cm-string-2">`${</span><span class="cm-variable-2">currentPath</span><span class="cm-string-2">}/index.html`</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  } <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">text</span> <span class="cm-operator">=</span> <span class="cm-keyword">await</span> <span class="cm-variable">Deno</span>.<span class="cm-property">readTextFile</span>(<span class="cm-variable-2">entryPath</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">fname</span> <span class="cm-operator">=</span> <span class="cm-variable-2">text</span>.<span class="cm-property">match</span>(<span class="cm-string-2">/\&lt;a[^&gt;]*?class="node_link[^&gt;]*?href=".*?\/([^\/]*?)\/"/</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">RegExp</span>.<span class="cm-property">$1</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable-2">fname</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">newPath</span> <span class="cm-operator">=</span> <span class="cm-string-2">`${</span><span class="cm-variable-2">currentPath</span><span class="cm-string-2">}/${</span><span class="cm-variable-2">fname</span><span class="cm-string-2">}`</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">await</span> <span class="cm-variable">Deno</span>.<span class="cm-property">mkdir</span>(<span class="cm-variable-2">newPath</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Deno</span>.<span class="cm-property">rename</span>(<span class="cm-variable-2">entryPath</span>, <span class="cm-string-2">`${</span><span class="cm-variable-2">newPath</span><span class="cm-string-2">}/index.html`</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 598px;"></div><div class="CodeMirror-gutters" style="display: none; height: 598px;"></div></div></div></pre><p><span>同样的脚本我们再改一下，帮我们创建一波文件夹，因为我要把markdown输出到maria-doc这个文件夹下（我把原来的文档下载于documentation这个文件夹），对于没有父文件夹的，会导致文件创建错误。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="js"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="js"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">async</span> <span class="cm-keyword">function</span> <span class="cm-def">visitDir</span>(<span class="cm-def">currentPath</span>) {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">for</span> <span class="cm-keyword">await</span> (<span class="cm-keyword">const</span> <span class="cm-def">dirEntry</span> <span class="cm-keyword">of</span> <span class="cm-variable">Deno</span>.<span class="cm-property">readDir</span>(<span class="cm-variable-2">currentPath</span>)) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">entryPath</span> <span class="cm-operator">=</span> <span class="cm-string-2">`${</span><span class="cm-variable-2">currentPath</span><span class="cm-string-2">}/${</span><span class="cm-variable-2">dirEntry</span>.<span class="cm-property">name</span><span class="cm-string-2">}`</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable-2">dirEntry</span>.<span class="cm-property">isDirectory</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Deno</span>.<span class="cm-property">mkdir</span>(<span class="cm-variable-2">entryPath</span>.<span class="cm-property">replace</span>(<span class="cm-string-2">/^documentation/</span>,<span class="cm-string">'maria-doc'</span>), {<span class="cm-property">recursive</span>: <span class="cm-atom">true</span>})</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">await</span> <span class="cm-variable">visitDir</span>(<span class="cm-variable-2">entryPath</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 230px;"></div><div class="CodeMirror-gutters" style="display: none; height: 230px;"></div></div></div></pre><p><span>好了，在这样的处理下，我发布了第一版Markdown文档到GitHub上。但是随便点点，我发现连JOIN Syntax这篇文档都没有，我意识到wget并不只是改名而已，有一部分文档是真的没下下来。于是我开始考虑怎么把这些丢失的文档下载下来。于是我在原来把HTML转换Markdown的代码里加入了把不存在的链接输出出来的代码，这里不赘述。如果正经做的话，应该单独写一个脚本来处理的，但我没有时间，所以只能让电脑多费点时间了。</span></p><p><span>在我拿到一个链接列表以后，就可以通过下面这个脚本下来写入了</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="js" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="js"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-def">missing</span> <span class="cm-operator">=</span> [</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">'/kb/en/library/documentation/xxx/'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">'/kb/en/library/documentation/xxx/'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">'/kb/en/library/documentation/xxx/'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">'/kb/en/library/documentation/xxx/'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Promise</span>.<span class="cm-property">all</span>(<span class="cm-variable">missing</span>.<span class="cm-property">map</span>(<span class="cm-def">x</span> <span class="cm-operator">=&gt;</span> <span class="cm-variable">fetch</span>(<span class="cm-string">'http://kb-mirror.mariadb.com'</span> <span class="cm-operator">+</span> <span class="cm-variable-2">x</span>).<span class="cm-property">then</span>(<span class="cm-def">res</span> <span class="cm-operator">=&gt;</span> <span class="cm-variable-2">res</span>.<span class="cm-property">text</span>())</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  .<span class="cm-property">then</span>(<span class="cm-keyword">async</span> <span class="cm-def">data</span> <span class="cm-operator">=&gt;</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">try</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">folder</span> <span class="cm-operator">=</span> <span class="cm-variable-2">x</span>.<span class="cm-property">substring</span>(<span class="cm-number">15</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">await</span> <span class="cm-variable">Deno</span>.<span class="cm-property">mkdir</span>(<span class="cm-variable-2">folder</span>, {<span class="cm-property">recursive</span>: <span class="cm-atom">true</span>});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Deno</span>.<span class="cm-property">writeTextFile</span>(<span class="cm-variable-2">folder</span> <span class="cm-operator">+</span> <span class="cm-string">'index.html'</span>, <span class="cm-variable-2">data</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  } <span class="cm-keyword">catch</span> (<span class="cm-def">e</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-variable-2">e</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  })));</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 414px;"></div><div class="CodeMirror-gutters" style="display: none; height: 414px;"></div></div></div></pre><p><span>这个Promise.all是我编写异步请求标准的写法。我不知道是不是有其他优雅的写法，我能想到的就是把它都包在Promise里面，然后让Promise.all来帮我全部调用。</span></p><p><span>用这些操作，我成功地补充了一部分之前没下载下来地文档。可以说，已经可以算作一个相对完整地文档了。下面就是把它做成一个文档网站了。</span></p><h2><a name="用docsify把大批markdown做成一个文档网站" class="md-header-anchor"></a><span>用docsify把大批Markdown做成一个文档网站</span></h2><p><span>虽然只有Markdown在GitHub上已经足够浏览以及下载了，但是我想再进一步，做成一个文档网站，放到我的GitHub Pages上，供大家浏览。</span></p><p><span>我首先想到的是GitBook，但是我最近访问GitBook的时候遇到了些问题，GitBook似乎有一些限制，不像以前那么自由。于是我转向VuePress，但是它让我失望了，webpack编译让我的内存直接溢出。我果断放弃VuePress，开始继续搜索。终于，我我选中了另一个工具，docsify，但我也不知道它怎么样，就抱着试一试的态度开搞。先全局安装CLI工具</span></p><pre lang="bash" class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">yarn global add docsify-cli</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><span>然后到我的文档目录</span></p><pre lang="bash" class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">docsify init ./maria-doc</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><span>然后瞬间结束了。WHAT？怎么不编译呢？我在文件夹里一个HTML也没看到。继续查了查才知道，原来docsify本身就是不编译直接读取Markdown文档的。我看了看index.html，还真的可以用。于是我高兴地提交了第二版代码到我的GitHub仓库里。</span></p><p><span>默认的配置就是可以用的，但是后续我加了一些docsify的插件，比如SQL高亮、全文搜索、页面右侧目录、侧栏自由折叠等。配置的话就是下面这样</span></p><pre lang="js" class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="js"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">window</span>.<span class="cm-property">$docsify</span> <span class="cm-operator">=</span> {</span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-property">name</span>: <span class="cm-string">'Unofficial MariaDB Server Documentation'</span>,</span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-property">repo</span>: <span class="cm-string">'AlexanderMisel/mariadb-documentation'</span>,</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-property">auto2top</span>: <span class="cm-atom">true</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-property">loadSidebar</span>: <span class="cm-atom">true</span>,</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-property">sidebarDisplayLevel</span>: <span class="cm-number">0</span>,</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-property">search</span>: <span class="cm-string">'auto'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-property">toc</span>: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-property">tocMaxLevel</span>: <span class="cm-number">3</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-property">target</span>: <span class="cm-string">'h2, h3'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  },</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 276px;"></div><div class="CodeMirror-gutters" style="display: none; height: 276px;"></div></div></div></pre><p><span>然后其实我还自动生成了一下</span><code>_sidebar.md</code><span>，这个文件是帮助docsify组织目录的，不然它只能看到当前文件的目录。具体过程代码我都会放在我repo的Wiki中，供大家参考。</span></p><hr /><p><span>到此，我们的非官方的MariaDB文档就在GitHub Pages搭建完成了。大家可以去下面这个网址看到我这篇博客搭建出来的效果：</span><a href='https://alexandermisel.github.io/mariadb-documentation/' target='_blank' class='url'>https://alexandermisel.github.io/mariadb-documentation/</a></p><p><span>欢迎大家star我这个repo，上面网页的右上角就有GitHub corner，可以点击进入repo。对于Deno、docsify我都是新手，现学现卖，有什么更好的建议，大家可以反馈给我。</span><a href='../' title='返回首页'><span>∎</span></a></p></div>
<script src="../dist/style_fix.js"></script>
<script src="../dist/mini_pangu.js"></script>
</body>
</html>